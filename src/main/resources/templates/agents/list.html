<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our Agents - Real Estate Hub</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link th:href="@{/styles.css}" rel="stylesheet">
</head>
<body class="dark-theme">
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg fixed-top">
        <div class="container">
            <a class="navbar-brand" href="/">
                <i class="fas fa-home me-2"></i>Real Estate Hub
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation" style="border: 1px solid rgba(255,255,255,0.3);">
                <span class="navbar-toggler-icon" style="background-image: url(&quot;data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba(255, 255, 255, 0.85)' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e&quot;);"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="/">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/properties">Properties</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="/agents">Agents</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/about">About</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/contact">Contact</a>
                    </li>
                </ul>
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="/auth/login">
                            <i class="fas fa-sign-in-alt me-1"></i>Login
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/agent/register">
                            <i class="fas fa-user-tie me-1"></i>Register as Agent
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Page Header -->
    <section class="py-5 section" style="margin-top: 100px; background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);">
        <div class="container">
            <div class="row">
                <div class="col-12 text-center fade-in">
                    <h1 class="display-4 fw-bold text-white mb-3">Our Expert Agents</h1>
                    <p class="lead text-white" style="opacity: 0.9;">Meet our professional real estate agents ready to help you find your dream home</p>
                    
                    <!-- Agent Statistics -->
                    <div class="row g-4 mt-5">
                        <div class="col-lg-4 col-md-6">
                            <div class="stats-card fade-in" style="animation-delay: 0.1s;">
                                <div class="stats-icon-wrapper">
                                    <i class="fas fa-users stats-icon"></i>
                                </div>
                                <div class="stats-content">
                                    <div class="stats-number" th:text="${totalAgents}">0</div>
                                    <div class="stats-label">Total Agents</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-6">
                            <div class="stats-card fade-in" style="animation-delay: 0.2s;">
                                <div class="stats-icon-wrapper">
                                    <i class="fas fa-home stats-icon"></i>
                                </div>
                                <div class="stats-content">
                                    <div class="stats-number" th:text="${agentsWithProperties}">0</div>
                                    <div class="stats-label">Agents with Properties</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-6">
                            <div class="stats-card fade-in" style="animation-delay: 0.3s;">
                                <div class="stats-icon-wrapper">
                                    <i class="fas fa-calendar-alt stats-icon"></i>
                                </div>
                                <div class="stats-content">
                                    <div class="stats-number" th:text="${averageExperience}">0.0</div>
                                    <div class="stats-label">Avg. Experience (Years)</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    cities
    <!-- Agents with Properties -->
    <section class="section">
        <div class="container">
            <div class="row g-4" th:if="${agents != null and !agents.empty}">
                <div class="col-12" th:each="agent, iterStat : ${agents}">
                    <div class="card agent-profile-card mb-4 shadow-lg fade-in" th:style="'animation-delay: ' + ${iterStat.index * 0.15} + 's;'">
                        <div class="card-body">
                            <div class="row">
                                <!-- Agent Information -->
                                <div class="col-lg-4">
                                    <div class="agent-info text-center">
                                        <div class="agent-avatar-wrapper mb-3">
                                            <img th:src="${agent.profilePictureUrl != null && !agent.profilePictureUrl.isEmpty() ? agent.profilePictureUrl : 'https://img.freepik.com/free-vector/blue-circle-with-white-user_78370-4707.jpg?semt=ais_hybrid&w=740&q=80'}" 
                                                 class="agent-avatar" alt="Agent Photo">
                                            <div class="agent-avatar-overlay">
                                                <i class="fas fa-camera"></i>
                                            </div>
                                        </div>
                                        <h4 class="agent-name" th:text="${agent.getAgentName()}">Agent Name</h4>
                                        <p class="agent-title text-primary fw-semibold" th:text="'License: ' + ${agent.licenseNumber}">License: RE-2024-001</p>
                                        
                                        <div class="agent-stats mb-3">
                                            <div class="row g-2">
                                                <div class="col-6">
                                                    <div class="stat-item">
                                                        <div class="stat-number text-primary" th:text="${agent.experienceYears}">0</div>
                                                        <div class="stat-label">Years Exp.</div>
                                                    </div>
                                                </div>
                                                <div class="col-6">
                                                    <div class="stat-item">
                                                        <div class="stat-number text-success" th:text="${agent.totalListings}">0</div>
                                                        <div class="stat-label">Properties</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="agent-rating mb-3">
                                            <div class="rating-stars">
                                    <i class="fas fa-star text-warning"></i>
                                    <i class="fas fa-star text-warning"></i>
                                    <i class="fas fa-star text-warning"></i>
                                    <i class="fas fa-star text-warning"></i>
                                    <i class="fas fa-star text-warning"></i>
                                            </div>
                                            <span class="rating-text" th:text="${agent.rating}">4.8</span>
                                </div>
                                        
                                        <div class="agent-contact mb-3">
                                <p class="text-muted small">
                                                <i class="fas fa-envelope me-1"></i>
                                                <span th:text="${agent.getAgentEmail()}">agent@email.com</span>
                                            </p>
                                            <p class="text-muted small" th:if="${agent.getAgentPhone()}">
                                                <i class="fas fa-phone me-1"></i>
                                                <span th:text="${agent.getAgentPhone()}">+359 888 123 456</span>
                                </p>
                            </div>
                            
                                        <div class="agent-bio mb-3">
                                            <p class="text-muted small" th:text="${agent.bio}">Experienced real estate agent with extensive knowledge of the local market.</p>
                                        </div>
                                        
                                        <div class="agent-specializations mb-3" th:if="${agent.getSpecializationsAsString() != null and !agent.getSpecializationsAsString().isEmpty()}">
                                            <div class="specialization-tags d-flex flex-wrap justify-content-center gap-2">
                                                <span class="badge bg-primary px-3 py-2" 
                                                      th:each="spec : ${#strings.arraySplit(agent.getSpecializationsAsString(), ',')}" 
                                                      th:text="${#strings.trim(spec)}">Specialization</span>
                                            </div>
                                        </div>
                                        
                                        <!-- Agent Actions -->
                                        <div class="agent-actions mt-3">
                                            <a th:href="@{/agents/detail(id=${agent.id})}" class="btn btn-outline-primary btn-sm w-100 mb-2">
                                                <i class="fas fa-eye me-2"></i>View Profile
                                            </a>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Agent Properties -->
                                <div class="col-lg-8">
                                    <div class="agent-properties">
                                        <div class="d-flex justify-content-between align-items-center mb-4">
                                            <h5 class="mb-0 fw-bold">
                                                <i class="fas fa-home me-2 text-primary"></i>Properties
                                                <span class="badge bg-primary ms-2 px-3 py-2" th:text="${agent.properties != null ? agent.properties.size() : 0}">0</span>
                                            </h5>
                                        </div>
                                        
                                        <div th:if="${agent.properties != null and !agent.properties.empty}" class="row g-3">
                                            <div class="col-md-6 col-lg-4" th:each="property : ${agent.properties}">
                                                <div class="card property-mini-card h-100 transition-all">
                                                    <div class="property-mini-image-wrapper position-relative">
                                                        <img th:src="${property.getPrimaryImageUrl()}" 
                                                             class="property-mini-image" 
                                                             alt="Property Image">
                                                        <div class="property-mini-overlay">
                                                            <a th:href="@{/properties/detail(id=${property.id})}" class="btn btn-light btn-sm">
                                                                <i class="fas fa-eye me-1"></i>Quick View
                                                            </a>
                                                        </div>
                                                    </div>
                                                    <div class="card-body">
                                                        <div class="property-price text-primary fw-bold mb-2" th:text="'€' + ${#numbers.formatDecimal(property.price, 0, 0)}">€150,000</div>
                                                        <h6 class="property-title mb-2 fw-semibold" th:text="${property.title}">Property Title</h6>
                                                        <div class="property-location text-muted small mb-2" th:if="${property.city != null}">
                                                            <i class="fas fa-map-marker-alt me-1"></i>
                                                            <span th:text="${property.city.name}">City</span>
                                                        </div>
                                                        <div class="property-features mb-3 d-flex flex-wrap gap-1">
                                                            <span class="badge bg-light text-dark" th:if="${property.beds != null and property.beds > 0}">
                                                                <i class="fas fa-bed me-1"></i><span th:text="${property.beds}">2</span>
                                                            </span>
                                                            <span class="badge bg-light text-dark" th:if="${property.baths != null and property.baths > 0}">
                                                                <i class="fas fa-bath me-1"></i><span th:text="${property.baths}">1</span>
                                                            </span>
                                                            <span class="badge bg-light text-dark" th:if="${property.areaSqm != null}">
                                                                <i class="fas fa-ruler-combined me-1"></i><span th:text="${#numbers.formatDecimal(property.areaSqm, 0, 0)}">85</span>m²
                                                            </span>
                                                        </div>
                                                        <div class="property-status mb-3 d-flex gap-1">
                                                            <span class="badge" 
                                                                  th:classappend="${property.status.name() == 'ACTIVE'} ? 'bg-success' : 'bg-secondary'"
                                                                  th:text="${property.status.name()}">ACTIVE</span>
                                                            <span th:if="${property.featured}" class="badge bg-warning">
                                                                <i class="fas fa-star me-1"></i>Featured
                                                            </span>
                                                        </div>
                                                        <div class="property-actions">
                                                            <a th:href="@{/properties/detail(id=${property.id})}" class="btn btn-outline-primary btn-sm w-100">
                                                                <i class="fas fa-arrow-right me-2"></i>View Details
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div th:if="${agent.properties == null or agent.properties.empty}" class="text-center py-4">
                                            <i class="fas fa-home fa-3x text-muted mb-3"></i>
                                            <h6 class="text-muted">No Properties Listed</h6>
                                            <p class="text-muted small">This agent hasn't listed any properties yet.</p>
                                            <a th:href="@{/agent/properties/add}" class="btn btn-outline-primary btn-sm">
                                                <i class="fas fa-plus me-1"></i>Add Your Property
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="row" th:if="${agents == null or agents.empty}">
                <div class="col-12 text-center py-5">
                    <div class="empty-state">
                        <i class="fas fa-users fa-4x text-muted mb-4"></i>
                        <h3 class="text-muted mb-3">No Agents Available</h3>
                        <p class="text-muted">We're currently working on adding expert agents to our platform. Check back soon!</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="row g-4">
                <div class="col-lg-4">
                    <h5>Real Estate Hub</h5>
                    <p>Your trusted partner in finding the perfect property in Bulgaria. We connect you with the best homes and expert agents.</p>
                    <div class="d-flex gap-3 social-links">
                        <a href="#" class="social-link" aria-label="Facebook">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="#" class="social-link" aria-label="Twitter">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="#" class="social-link" aria-label="Instagram">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="#" class="social-link" aria-label="LinkedIn">
                            <i class="fab fa-linkedin-in"></i>
                        </a>
                    </div>
                </div>
                <div class="col-lg-2">
                    <h5>Quick Links</h5>
                    <ul class="list-unstyled">
                        <li><a href="/properties">Properties</a></li>
                        <li><a href="/agents">Agents</a></li>
                        <li><a href="/about">About Us</a></li>
                        <li><a href="/contact">Contact</a></li>
                    </ul>
                </div>
                <div class="col-lg-2">
                    <h5>Services</h5>
                    <ul class="list-unstyled">
                        <li><a href="#">Buy Property</a></li>
                        <li><a href="#">Sell Property</a></li>
                        <li><a href="#">Rent Property</a></li>
                        <li><a href="#">Property Valuation</a></li>
                    </ul>
                </div>
                <div class="col-lg-4">
                    <h5>Contact Info</h5>
                    <ul class="list-unstyled">
                        <li><i class="fas fa-phone me-2"></i>+359 888 123 456</li>
                        <li><i class="fas fa-envelope me-2"></i>info@realestatehub.bg</li>
                        <li><i class="fas fa-map-marker-alt me-2"></i>Sofia, Bulgaria</li>
                    </ul>
                </div>
            </div>
            <hr class="my-4">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <p class="text-muted mb-0">&copy; 2024 Real Estate Hub. All rights reserved.</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <a href="#" class="text-muted me-3">Privacy Policy</a>
                    <a href="#" class="text-muted">Terms of Service</a>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>